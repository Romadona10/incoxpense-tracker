"use strict";(self.webpackChunkFintracker=self.webpackChunkFintracker||[]).push([[361],{4361:(w,v,r)=>{r.r(v),r.d(v,{ReportsModule:()=>D});var m=r(177),h=r(8498),t=r(7705),l=r(5596),d=r(6850);let b=(()=>{class e{constructor(o){this.router=o}ngOnInit(){this.router.navigate(["/reports/monthly-reports"])}onTabChange(o){switch(o){case 0:this.router.navigate(["/reports/monthly-reports"]);break;case 1:this.router.navigate(["/reports/export-reports"])}}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(h.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-reports"]],decls:7,vars:0,consts:[[3,"selectedIndexChange"],["label","Monthly Report"],["label","Export Report"]],template:function(n,a){1&n&&(t.j41(0,"mat-card")(1,"mat-card-title"),t.EFF(2,"Reports"),t.k0s(),t.j41(3,"mat-tab-group",0),t.bIt("selectedIndexChange",function(i){return a.onTabChange(i)}),t.nrm(4,"mat-tab",1)(5,"mat-tab",2),t.k0s(),t.nrm(6,"router-outlet"),t.k0s())},dependencies:[h.n3,l.RN,l.dh,d.mq,d.T8],styles:["mat-card-title[_ngcontent-%COMP%]{text-align:center;font-family:Poppins,sans-serif}"]})}}return e})();var u=r(8192),C=r(1626);let M=(()=>{class e{constructor(o){this.http=o,this.apiUrl="https://expensetracker-backend-q5pq.onrender.com/api/expenses/report/monthly"}getMonthlyReport(o,n,a){const s=localStorage.getItem("token"),i=(new C.Lr).set("Authorization",`Bearer ${s||""}`);return this.http.get(`${this.apiUrl}/${o}?month=${n}&year=${a}`,{headers:i})}static{this.\u0275fac=function(n){return new(n||e)(t.KVO(C.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var E=r(4796),F=r(1997),g=r(5911),c=r(882),f=r(2798),x=r(6600);function O(e,R){if(1&e&&(t.j41(0,"mat-option",8),t.EFF(1),t.k0s()),2&e){const o=R.$implicit;t.Y8G("value",o),t.R7$(1),t.JRh(o)}}function I(e,R){if(1&e&&(t.j41(0,"mat-card")(1,"mat-card-title"),t.EFF(2),t.k0s()()),2&e){const o=t.XpG();t.R7$(2),t.Lme("Total Expenses for ",o.selectedMonth,": \u20a6",o.totalAmount,"")}}let P=(()=>{class e{constructor(o,n){this.reportService=o,this.authService=n,this.chartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:a=>`${a.label}: \u20a6${a.raw||0}`}}}},this.chartType="bar",this.selectedMonth="",this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.totalAmount=null,this.chartData={datasets:[{data:[],label:"Expenses",backgroundColor:["rgb(254, 236, 55)","rgb(255, 162, 76)","rgb(255, 119, 183)","rgb(9, 16, 87)"," rgb(175, 23, 64)","rgb(13, 146, 244)"]}],labels:[]},this.userId=""}ngOnInit(){const o=(new Date).getMonth();this.selectedMonth=this.months[o],this.userId=localStorage.getItem("userId")||"";const n=(new Date).getFullYear();this.loadReportData(this.selectedMonth,n)}loadReportData(o,n){const a=this.months.indexOf(o)+1;this.reportService.getMonthlyReport(this.userId,a,n).subscribe(s=>{this.chartData.datasets[0].data=s.data,this.chartData.labels=s.labels,this.totalAmount=s.total,this.chart&&this.chart.update()})}onMonthChange(o){const n=(new Date).getFullYear();this.loadReportData(o.value,n)}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(M),t.rXU(E.u))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-monthly-report"]],viewQuery:function(n,a){if(1&n&&t.GBs(u.j9,5),2&n){let s;t.mGM(s=t.lsd())&&(a.chart=s.first)}},decls:13,vars:7,consts:[[1,"monthly-report-container","mat-elevation-z8"],["color","primary"],[1,"chart-container"],["baseChart","",3,"data","options","type","legend"],["appearance","outline"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"mat-toolbar",1)(2,"span"),t.EFF(3,"Monthly Report"),t.k0s()(),t.j41(4,"div",2),t.nrm(5,"canvas",3),t.k0s(),t.nrm(6,"mat-divider"),t.j41(7,"mat-form-field",4)(8,"mat-label"),t.EFF(9,"Select Month"),t.k0s(),t.j41(10,"mat-select",5),t.bIt("valueChange",function(i){return a.selectedMonth=i})("selectionChange",function(i){return a.onMonthChange(i)}),t.DNE(11,O,2,2,"mat-option",6),t.k0s()(),t.DNE(12,I,3,2,"mat-card",7),t.k0s()),2&n&&(t.R7$(5),t.Y8G("data",a.chartData)("options",a.chartOptions)("type",a.chartType)("legend",!0),t.R7$(5),t.Y8G("value",a.selectedMonth),t.R7$(1),t.Y8G("ngForOf",a.months),t.R7$(1),t.Y8G("ngIf",a.totalAmount))},dependencies:[m.Sq,m.bT,F.q,l.RN,l.dh,g.KQ,c.rl,c.nJ,f.VO,x.wT,u.j9],styles:[".monthly-report-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px}.monthly-report-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.monthly-report-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto;position:relative}.monthly-report-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;width:100%!important;height:auto!important;cursor:pointer}.monthly-report-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-top:20px}.monthly-report-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-top:20px;padding:15px;background-color:#f5f5f5;color:#000}.monthly-report-container[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}"]})}}return e})();var y=r(8834),p=r(5351);let j=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-export-modal"]],decls:8,vars:0,consts:[["mat-dialog-title","","align","center"],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(n,a){1&n&&(t.j41(0,"h2",0),t.EFF(1,"Email Us"),t.k0s(),t.j41(2,"div",1)(3,"p"),t.EFF(4,"At the moment, we can't export the report. We are working on it."),t.k0s()(),t.j41(5,"div",2)(6,"button",3),t.EFF(7,"OK"),t.k0s()())},dependencies:[y.$z,p.tx,p.BI,p.Yi,p.E7]})}}return e})();const k=[{path:"",component:b,children:[{path:"",redirectTo:"reports",pathMatch:"full"},{path:"monthly-reports",component:P},{path:"export-reports",component:(()=>{class e{constructor(o,n){this.reportService=o,this.dialog=n,this.selectedFormat="pdf"}onExport(){this.dialog.open(j,{width:"400px",disableClose:!0})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(M),t.rXU(p.bZ))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-export-report"]],decls:15,vars:1,consts:[[1,"export-report-container","mat-elevation-z8"],["color","primary"],["appearance","outline"],[3,"value","valueChange"],["value","pdf"],["value","excel"],[1,"form-actions"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"mat-toolbar",1)(2,"span"),t.EFF(3,"Export Report"),t.k0s()(),t.j41(4,"mat-form-field",2)(5,"mat-label"),t.EFF(6,"Select Format"),t.k0s(),t.j41(7,"mat-select",3),t.bIt("valueChange",function(i){return a.selectedFormat=i}),t.j41(8,"mat-option",4),t.EFF(9,"PDF"),t.k0s(),t.j41(10,"mat-option",5),t.EFF(11,"Excel"),t.k0s()()(),t.j41(12,"div",6)(13,"button",7),t.bIt("click",function(){return a.onExport()}),t.EFF(14,"Export"),t.k0s()()()),2&n&&(t.R7$(7),t.Y8G("value",a.selectedFormat))},dependencies:[g.KQ,c.rl,c.nJ,f.VO,x.wT,y.$z],styles:[".export-report-container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px}.export-report-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.export-report-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})}}return e})()}]}];let T=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(k),h.iI]})}}return e})();var $=r(9631);let D=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[m.MD,T,F.w,l.Hu,g.s5,c.RG,$.fS,f.Ve,y.Hl,d.RI,u.FR]})}}return e})()}}]);