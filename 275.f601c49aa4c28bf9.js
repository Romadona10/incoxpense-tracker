"use strict";(self.webpackChunkFintracker=self.webpackChunkFintracker||[]).push([[275],{275:(Y,v,r)=>{r.r(v),r.d(v,{ReportsModule:()=>G});var d=r(177),m=r(8498),t=r(7705),c=r(5596),u=r(6850);let O=(()=>{class e{constructor(o){this.router=o}ngOnInit(){this.router.navigate(["/reports/monthly-reports"])}onTabChange(o){switch(o){case 0:this.router.navigate(["/reports/monthly-reports"]);break;case 1:this.router.navigate(["/reports/export-reports"])}}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(m.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-reports"]],decls:7,vars:0,consts:[[3,"selectedIndexChange"],["label","Monthly Report"],["label","Export Report"]],template:function(n,a){1&n&&(t.j41(0,"mat-card")(1,"mat-card-title"),t.EFF(2,"Reports"),t.k0s(),t.j41(3,"mat-tab-group",0),t.bIt("selectedIndexChange",function(l){return a.onTabChange(l)}),t.nrm(4,"mat-tab",1)(5,"mat-tab",2),t.k0s(),t.nrm(6,"router-outlet"),t.k0s())},dependencies:[m.n3,c.RN,c.dh,u.mq,u.T8],styles:["mat-card-title[_ngcontent-%COMP%]{text-align:center;font-family:Poppins,sans-serif}"]})}}return e})();var g=r(8192),i=r(5351),h=r(8834);let E=(()=>{class e{constructor(o){this.data=o}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(i.Vh))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-no-report"]],decls:9,vars:1,consts:[[1,"no-report-dialog"],["align","end"],["mat-button","","mat-dialog-close","","color","primary"]],template:function(n,a){1&n&&(t.j41(0,"mat-dialog-content")(1,"div",0)(2,"h2"),t.EFF(3,"No Report Available"),t.k0s(),t.j41(4,"p"),t.EFF(5),t.k0s()()(),t.j41(6,"mat-dialog-actions",1)(7,"button",2),t.EFF(8,"OK"),t.k0s()()),2&n&&(t.R7$(5),t.SpI("There is no report data available for ",a.data.selectedMonth,"."))},dependencies:[h.$z,i.tx,i.Yi,i.E7],styles:[".no-report-dialog[_ngcontent-%COMP%]{text-align:center}.no-report-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f44336;font-family:Poppins,sans-serif}.no-report-dialog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}"]})}}return e})();var M=r(1626);let F=(()=>{class e{constructor(o){this.http=o,this.apiUrl="https://expensetracker-backend-1-hdf2.onrender.com/api/expenses/report/monthly"}getMonthlyReport(o,n,a){const s=localStorage.getItem("token"),l=(new M.Lr).set("Authorization",`Bearer ${s||""}`);return this.http.get(`${this.apiUrl}/${o}?month=${n}&year=${a}`,{headers:l})}static{this.\u0275fac=function(n){return new(n||e)(t.KVO(M.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var P=r(4796),R=r(1997),f=r(5911),p=r(882),y=r(2798),b=r(6600),x=r(7575);function j(e,C){1&e&&t.nrm(0,"mat-progress-bar",10)}function I(e,C){if(1&e&&(t.j41(0,"mat-option",11),t.EFF(1),t.k0s()),2&e){const o=C.$implicit;t.Y8G("value",o),t.R7$(1),t.JRh(o)}}function k(e,C){if(1&e&&(t.j41(0,"mat-card")(1,"mat-card-title"),t.EFF(2),t.k0s()()),2&e){const o=t.XpG();t.R7$(2),t.Lme("Total Expenses for ",o.selectedMonth,": \u20a6",o.totalAmount,"")}}let T=(()=>{class e{constructor(o,n,a){this.reportService=o,this.authService=n,this.dialog=a,this.chartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:s=>`${s.label}: \u20a6${s.raw||0}`}}}},this.chartType="bar",this.selectedMonth="",this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.totalAmount=null,this.chartData={datasets:[{data:[],label:"Expenses",backgroundColor:["rgb(254, 236, 55)","rgb(255, 162, 76)","rgb(255, 119, 183)","rgb(9, 16, 87)"," rgb(175, 23, 64)","rgb(13, 146, 244)"]}],labels:[]},this.userId="",this.loading=!1}ngOnInit(){const o=(new Date).getMonth();this.selectedMonth=this.months[o],this.userId=localStorage.getItem("userId")||"";const n=(new Date).getFullYear();this.loadReportData(this.selectedMonth,n)}loadReportData(o,n){this.loading=!0;const a=this.months.indexOf(o)+1;this.reportService.getMonthlyReport(this.userId,a,n).subscribe(s=>{setTimeout(()=>{this.loading=!1,s&&0!==s.data.length?(this.chartData.datasets[0].data=s.data,this.chartData.labels=s.labels,this.totalAmount=s.total,this.chart&&this.chart.update()):(this.openNoReportDialog(o),this.totalAmount=null)},4e3)})}onMonthChange(o){const n=(new Date).getFullYear();this.loadReportData(o.value,n)}openNoReportDialog(o){this.dialog.open(E,{width:"400px",data:{selectedMonth:o}})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(F),t.rXU(P.u),t.rXU(i.bZ))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-monthly-report"]],viewQuery:function(n,a){if(1&n&&t.GBs(g.j9,5),2&n){let s;t.mGM(s=t.lsd())&&(a.chart=s.first)}},decls:15,vars:8,consts:[[1,"monthly-report-container","mat-elevation-z8"],[1,"loading"],["mode","indeterminate","color","accent",4,"ngIf"],["color","primary"],[1,"chart-container"],["baseChart","",3,"data","options","type","legend"],["appearance","outline"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mode","indeterminate","color","accent"],[3,"value"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,j,1,0,"mat-progress-bar",2),t.k0s(),t.j41(3,"mat-toolbar",3)(4,"span"),t.EFF(5,"Monthly Report"),t.k0s()(),t.j41(6,"div",4),t.nrm(7,"canvas",5),t.k0s(),t.nrm(8,"mat-divider"),t.j41(9,"mat-form-field",6)(10,"mat-label"),t.EFF(11,"Select Month"),t.k0s(),t.j41(12,"mat-select",7),t.bIt("valueChange",function(l){return a.selectedMonth=l})("selectionChange",function(l){return a.onMonthChange(l)}),t.DNE(13,I,2,2,"mat-option",8),t.k0s()(),t.DNE(14,k,3,2,"mat-card",9),t.k0s()),2&n&&(t.R7$(2),t.Y8G("ngIf",a.loading),t.R7$(5),t.Y8G("data",a.chartData)("options",a.chartOptions)("type",a.chartType)("legend",!0),t.R7$(5),t.Y8G("value",a.selectedMonth),t.R7$(1),t.Y8G("ngForOf",a.months),t.R7$(1),t.Y8G("ngIf",a.totalAmount))},dependencies:[d.Sq,d.bT,R.q,c.RN,c.dh,f.KQ,p.rl,p.nJ,y.VO,b.wT,x.HM,g.j9],styles:[".monthly-report-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px}.monthly-report-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.monthly-report-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto;position:relative}.monthly-report-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;width:100%!important;height:auto!important;cursor:pointer}.monthly-report-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-top:20px}.monthly-report-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-top:20px;padding:15px;background-color:#f5f5f5;color:#000}.monthly-report-container[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}"]})}}return e})(),$=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-export-modal"]],decls:8,vars:0,consts:[["mat-dialog-title","","align","center"],["mat-dialog-content",""],["mat-dialog-actions","","align","center"],["mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(n,a){1&n&&(t.j41(0,"h2",0),t.EFF(1,"Email Us"),t.k0s(),t.j41(2,"div",1)(3,"p"),t.EFF(4,"At the moment, we can't export the report. We are working on it."),t.k0s()(),t.j41(5,"div",2)(6,"button",3),t.EFF(7,"OK"),t.k0s()())},dependencies:[h.$z,i.tx,i.BI,i.Yi,i.E7]})}}return e})();const D=[{path:"",component:O,children:[{path:"",redirectTo:"reports",pathMatch:"full"},{path:"monthly-reports",component:T},{path:"export-reports",component:(()=>{class e{constructor(o,n){this.reportService=o,this.dialog=n,this.selectedFormat="pdf"}onExport(){this.dialog.open($,{width:"400px",disableClose:!0})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(F),t.rXU(i.bZ))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-export-report"]],decls:15,vars:1,consts:[[1,"export-report-container","mat-elevation-z8"],["color","primary"],["appearance","outline"],[3,"value","valueChange"],["value","pdf"],["value","excel"],[1,"form-actions"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"mat-toolbar",1)(2,"span"),t.EFF(3,"Export Report"),t.k0s()(),t.j41(4,"mat-form-field",2)(5,"mat-label"),t.EFF(6,"Select Format"),t.k0s(),t.j41(7,"mat-select",3),t.bIt("valueChange",function(l){return a.selectedFormat=l}),t.j41(8,"mat-option",4),t.EFF(9,"PDF"),t.k0s(),t.j41(10,"mat-option",5),t.EFF(11,"Excel"),t.k0s()()(),t.j41(12,"div",6)(13,"button",7),t.bIt("click",function(){return a.onExport()}),t.EFF(14,"Export"),t.k0s()()()),2&n&&(t.R7$(7),t.Y8G("value",a.selectedFormat))},dependencies:[f.KQ,p.rl,p.nJ,y.VO,b.wT,h.$z],styles:[".export-report-container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px}.export-report-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.export-report-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})}}return e})()}]}];let U=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[m.iI.forChild(D),m.iI]})}}return e})();var w=r(9631);let G=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[d.MD,U,R.w,c.Hu,f.s5,p.RG,w.fS,y.Ve,h.Hl,u.RI,x.PO,g.FR]})}}return e})()}}]);